<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DOM 事件 | HC的前端之旅</title>
    <meta name="description" content="Javascript, HTML, CSS, Vue, React, Flutter, NodeJs, 前端技术">
    
    
    <link rel="preload" href="/blog/assets/css/0.styles.694c5b74.css" as="style"><link rel="preload" href="/blog/assets/js/app.404a6106.js" as="script"><link rel="preload" href="/blog/assets/js/2.3ec31b7f.js" as="script"><link rel="preload" href="/blog/assets/js/16.0b023510.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.fc1d60c3.js"><link rel="prefetch" href="/blog/assets/js/11.523c4634.js"><link rel="prefetch" href="/blog/assets/js/12.abca864f.js"><link rel="prefetch" href="/blog/assets/js/13.5b50d4ca.js"><link rel="prefetch" href="/blog/assets/js/14.e0edb64a.js"><link rel="prefetch" href="/blog/assets/js/15.7980f798.js"><link rel="prefetch" href="/blog/assets/js/17.506430c8.js"><link rel="prefetch" href="/blog/assets/js/18.a64bcb0a.js"><link rel="prefetch" href="/blog/assets/js/19.58fd0fcc.js"><link rel="prefetch" href="/blog/assets/js/20.62a83a65.js"><link rel="prefetch" href="/blog/assets/js/21.a6c145c1.js"><link rel="prefetch" href="/blog/assets/js/22.86120225.js"><link rel="prefetch" href="/blog/assets/js/23.1d5f6c09.js"><link rel="prefetch" href="/blog/assets/js/24.3b3d7083.js"><link rel="prefetch" href="/blog/assets/js/25.0c55a03b.js"><link rel="prefetch" href="/blog/assets/js/26.f5adbea6.js"><link rel="prefetch" href="/blog/assets/js/27.f7ccc17d.js"><link rel="prefetch" href="/blog/assets/js/28.d5d129ed.js"><link rel="prefetch" href="/blog/assets/js/29.15e86219.js"><link rel="prefetch" href="/blog/assets/js/3.2dbd99d4.js"><link rel="prefetch" href="/blog/assets/js/30.20c57fc2.js"><link rel="prefetch" href="/blog/assets/js/31.93c96ddb.js"><link rel="prefetch" href="/blog/assets/js/32.e43dcd71.js"><link rel="prefetch" href="/blog/assets/js/33.486a0696.js"><link rel="prefetch" href="/blog/assets/js/4.d168f381.js"><link rel="prefetch" href="/blog/assets/js/5.e8637279.js"><link rel="prefetch" href="/blog/assets/js/6.e2e543f3.js"><link rel="prefetch" href="/blog/assets/js/7.23803295.js"><link rel="prefetch" href="/blog/assets/js/8.15296b6c.js"><link rel="prefetch" href="/blog/assets/js/9.9e1c656a.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.694c5b74.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">HC的前端之旅</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/basic/" class="nav-link router-link-active">基础</a></div><div class="nav-item"><a href="/blog/advanced/" class="nav-link">进阶</a></div><div class="nav-item"><a href="/blog/frame/" class="nav-link">框架</a></div><div class="nav-item"><a href="/blog/other/" class="nav-link">其他</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/basic/" class="nav-link router-link-active">基础</a></div><div class="nav-item"><a href="/blog/advanced/" class="nav-link">进阶</a></div><div class="nav-item"><a href="/blog/frame/" class="nav-link">框架</a></div><div class="nav-item"><a href="/blog/other/" class="nav-link">其他</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>页面布局</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/basic/1-layout/center.html" class="sidebar-link">元素居中</a></li><li><a href="/blog/basic/1-layout/column.html" class="sidebar-link">多栏布局</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>盒模型</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/blog/basic/3-event/" class="active sidebar-link">DOM事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/basic/3-event/#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/blog/basic/3-event/#dom-事件流" class="sidebar-link">DOM 事件流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/basic/3-event/#现代浏览器" class="sidebar-link">现代浏览器</a></li><li class="sidebar-sub-header"><a href="/blog/basic/3-event/#ie8-及更早-ie-版本" class="sidebar-link">IE8 及更早 IE 版本</a></li><li class="sidebar-sub-header"><a href="/blog/basic/3-event/#this-的指向" class="sidebar-link">this 的指向</a></li><li class="sidebar-sub-header"><a href="/blog/basic/3-event/#事件委托-代理" class="sidebar-link">事件委托(代理)</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/basic/3-event/#dom-事件级别" class="sidebar-link">DOM 事件级别</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/basic/3-event/#dom0-级别" class="sidebar-link">DOM0 级别</a></li><li class="sidebar-sub-header"><a href="/blog/basic/3-event/#dom2-级别" class="sidebar-link">DOM2 级别</a></li><li class="sidebar-sub-header"><a href="/blog/basic/3-event/#dom3-级别" class="sidebar-link">DOM3 级别</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/basic/3-event/#常用方法" class="sidebar-link">常用方法</a></li><li class="sidebar-sub-header"><a href="/blog/basic/3-event/#常用属性" class="sidebar-link">常用属性</a></li></ul></li><li><a href="/blog/basic/4-http/" class="sidebar-link">HTTP</a></li><li><a href="/blog/basic/5-prototype/" class="sidebar-link">原型/原型链</a></li><li><a href="/blog/basic/6-oop/" class="sidebar-link">对向对象</a></li><li><a href="/blog/basic/7-comm/" class="sidebar-link">前后端通信</a></li><li><a href="/blog/basic/8-security/" class="sidebar-link">web安全</a></li><li><a href="/blog/basic/9-algorithm/" class="sidebar-link">算法</a></li><li><a href="/blog/basic/10-rendering/" class="sidebar-link">渲染机制</a></li><li><a href="/blog/basic/11-execution/" class="sidebar-link">JS执行机制</a></li><li><a href="/blog/basic/12-performance/" class="sidebar-link">性能优化</a></li><li><a href="/blog/basic/13-errorhandling/" class="sidebar-link">错误捕获</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dom-事件"><a href="#dom-事件" class="header-anchor">#</a> DOM 事件</h1> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>什么是 DOM 事件/流？事件委托(代理)是什么？分哪些级别？有什么方法和属性？</p></div> <h2 id="定义"><a href="#定义" class="header-anchor">#</a> 定义</h2> <p>DOM 是 JavaScript 操作网页的接口，全称为“文档对象模型”（Document Object Model）。事件的本质是程序各个组成部分之间的一种通信方式，也是异步编程的一种实现。DOM 支持大量的事件。</p> <h2 id="dom-事件流"><a href="#dom-事件流" class="header-anchor">#</a> DOM 事件流</h2> <p>当触发页面中某个元素的某一事件时，JS 引擎会从 window 对象依次向下层节点进行事件的捕获直到捕获到触发事件的目标节点，然后再从目标节点依次向上进行冒泡</p> <h3 id="现代浏览器"><a href="#现代浏览器" class="header-anchor">#</a> 现代浏览器</h3> <p>流程：捕获 =&gt; 目标节点 =&gt; 冒泡
监听：<em>element.add/removeEventListener(event, func, isExexInCapture)</em></p> <h3 id="ie8-及更早-ie-版本"><a href="#ie8-及更早-ie-版本" class="header-anchor">#</a> IE8 及更早 IE 版本</h3> <p>流程：捕获 =&gt; 冒泡
监听：<em>element.attach/detachEvent(event, func)</em></p> <h3 id="this-的指向"><a href="#this-的指向" class="header-anchor">#</a> this 的指向</h3> <p><em>监听函数内部的 this 指向触发事件的那个元素节点</em></p> <h3 id="事件委托-代理"><a href="#事件委托-代理" class="header-anchor">#</a> 事件委托(代理)</h3> <p>由于事件会在冒泡阶段向上传播到父节点，因此可以把子节点的监听函数定义在父节点上，由父节点的监听函数统一处理多个子元素的事件，即事件的代理（delegation）</p> <p>经典使用场景：</p> <p>当需要为一个列表中的每个子项添加监听事件时，可以给其父元素添加事件监听函数，并判断该事件的触发元素是否为子项然后再执行函数，此时对动态增加的子项也可生效。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;ul&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ul<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// some code</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="dom-事件级别"><a href="#dom-事件级别" class="header-anchor">#</a> DOM 事件级别</h2> <p>DOM 事件一般分为 3 个等级，依次为 DOM0 ，DOM2 及 DOM3 三个等级。</p> <h3 id="dom0-级别"><a href="#dom0-级别" class="header-anchor">#</a> DOM0 级别</h3> <p>将一个函数赋值给一个事件处理属性，可以通过给事件处理属性赋值为 <em>null</em> 来解绑事件</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>缺点：<em>无法同时在一个处理程序上绑定多个处理函数</em></p> <h3 id="dom2-级别"><a href="#dom2-级别" class="header-anchor">#</a> DOM2 级别</h3> <p>定义了 <em>add/removeEventListener</em> 两个方法用来绑定和解绑事件，并且还添加了是否在捕获阶段执行处理函数的参数</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// hello</span>
  <span class="token comment">// world</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="dom3-级别"><a href="#dom3-级别" class="header-anchor">#</a> DOM3 级别</h3> <p>DOM3 事件并未做太多改变，只是在 DOM2 事件上添加了更多支持的类型。</p> <ol><li>UI 事件，当用户与页面上的元素交互时触发，如：load、scroll</li> <li>焦点事件，当元素获得或失去焦点时触发，如：blur、focus</li> <li>鼠标事件，当用户通过鼠标在页面执行操作时触发如：dbclick、mouseup</li> <li>滚轮事件，当使用鼠标滚轮或类似设备时触发，如：mousewheel</li> <li>文本事件，当在文档中输入文本时触发，如：textInput</li> <li>键盘事件，当用户通过键盘在页面上执行操作时触发，如：keydown、keypress</li> <li>合成事件，当为 IME（输入法编辑器）输入字符时触发，如：compositionstart</li> <li>变动事件，当底层 DOM 结构发生变化时触发，如：DOMsubtreeModified</li> <li>同时 DOM3 级事件也允许使用者自定义一些事件</li></ol> <h2 id="常用方法"><a href="#常用方法" class="header-anchor">#</a> 常用方法</h2> <ol><li>event.preventDefault() （阻止浏览器对当前事件的默认行为）</li> <li>event.stopPropagation()（阻止事件在 DOM 中继续传播）</li> <li>event.stopImmediatePropagation()（阻止同一事件的其他监听函数被调用，不管监听函数定义在哪个节点）
如果同一个节点对于同一个事件指定了多个监听函数，这些函数会根据添加的顺序依次调用。
只要其中有一个监听函数调用了 Event.stopImmediatePropagation 方法，其他的监听函数就不会再执行</li> <li>event.composedPath() （返回一个数组，其包含事件的最底层节点和依次冒泡经过的所有上层节点）</li> <li>CustomEvent()（通过 new CustomEvent(type, options)生成自定义事件，通过 element.dispatchEvent(event)触发函数）</li></ol> <h2 id="常用属性"><a href="#常用属性" class="header-anchor">#</a> 常用属性</h2> <ol><li>event.bubbles 返回一个只读的布尔值表示当前事件是否会冒泡，除非显式声明，否则用构造函数自定义的事件默认不冒泡</li> <li>event.eventPhase 返回只读的整数常量表示目前所处阶段，此属性可能会返回 4 个值
<ul><li>0，事件目前还未发生</li> <li>1，事件处于捕获阶段</li> <li>2，事件到达目标节点</li> <li>3，事件处于冒泡阶段</li></ul></li> <li>event.cancelable 返回只读的布尔值表示是否可以取消
<ul><li>大多数浏览器原生事件都可以取消，除非显式声明，构造函数生成的事件不可取消</li> <li>当 cancelable 为 ture 时，调用 preventDefault()可以取消，如果为 false，则 preventDefault()不起作用</li></ul></li> <li>event.cancelBubble 表示是否阻止事件冒泡的布尔值，若设为 true，则与 event.stopPropagation()作用相同</li> <li>event.defaultPrevented 表示事件是否调用过 event.preventDefault()方法的只读布尔值</li> <li>event.target 返回原始触发事件的节点，即事件最初发生的那个节点</li> <li>event.targetTarget 返回事件的当前节点，即正在执行的监听函数所绑定的那个节点</li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2/10/2020, 7:17:08 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/basic/2-box/bfc.html" class="prev">BFC</a></span> <span class="next"><a href="/blog/basic/4-http/">HTTP</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.404a6106.js" defer></script><script src="/blog/assets/js/2.3ec31b7f.js" defer></script><script src="/blog/assets/js/16.0b023510.js" defer></script>
  </body>
</html>
